!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).ytSearch=e()}(function(){return function a(i,l,s){function u(t,e){if(!l[t]){if(!i[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(c)return c(t,!0);var o=new Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}var r=l[t]={exports:{}};i[t][0].call(r.exports,function(e){return u(i[t][1][e]||e)},r,r.exports,a,i,l,s)}return l[t].exports}for(var c="function"==typeof require&&require,e=0;e<s.length;e++)u(s[e]);return u}({1:[function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var v={follow:!0,mode:"auto"},f=e,m=function(){throw new Error("dasu: no _request implementation found!")};function a(n,o,r){v._mode="browser";var a=new window.XMLHttpRequest;if(!window)throw new Error('no global browser "window" object found.');if(!window.location)throw new Error('no global browser "window.location" object found.');n.protocol=n.protocol||window.location.protocol||"http",":"!==n.protocol[n.protocol.length-1]&&(n.protocol+=":"),n.hostname=n.hostname||n.host||window.location.hostname;var e=80;n.protocol&&(e=-1!==n.protocol.indexOf("https")?443:80);var t=n.hostname.toLowerCase().trim(),i=window.location.hostname.toLowerCase().trim();-1!==t.indexOf(i)&&(e=window.location.port||e),n.port=n.port||e;var l=n.protocol+"//"+n.hostname+(n.port?":"+n.port:""),s=l+n.path;v.debug&&console.log("dasu: url ["+s+"]"),v.debug&&(console.log("--- dasu opts ---"),console.log(n),console.log()),a.open(n.method,s,!0),a.onload=function(){r(null,a,a.responseText)},a.onerror=function(){var e=n.method.toUpperCase()+" "+s,t={name:"NetworkError",message:a.responseText||"NetworkError: XMLHttpRequest ("+e+")",desc:e,url:s,opts:n,data:o,origin:l,responseText:a.responseText,toString:function(){return t.message+"\n"+JSON.stringify(n,null,2).split(",")}};t.message=t.toString(),r(t)};for(var u=Object.keys(n.headers),c=0;c<u.length;c++){var d=u[c].toLowerCase(),p=n.headers[d];a.setRequestHeader(d,p)}try{a.send(o)}catch(e){var h=n.method.toUpperCase()+" "+s;e.desc=h,e.url=s,e.opts=n,e.data=o,e.origin=l,e.toString=function(){return e.message+"\n"+JSON.stringify(n,null,2).split(",")},r(e)}return{abort:function(){a.abort()}}}function g(r,a,l){v._mode="node";var e=f("http"),t=f("https"),s=f("zlib");(r=r||{}).hostname=r.hostname||r.host,r.protocol=r.protocol||"http";var n=e;r.protocol&&-1!==r.protocol.indexOf("https")&&(n=t),":"!==r.protocol[r.protocol.length-1]&&(r.protocol+=":"),v.debug&&(console.log("--- dasu opts ---"),console.log(r),console.log());var o=n.request(r,function(t){var e,n,o,r=[],a=t;s.createBrotliDecompress&&"br"===t.headers["content-encoding"]&&(a=e=s.createBrotliDecompress(),t.pipe(e)),s.createGunzip&&"gzip"===t.headers["content-encoding"]&&(a=n=s.createGunzip(),t.pipe(n)),s.createDeflate&&"deflate"===t.headers["content-encoding"]&&(a=o=s.createDeflate(),t.pipe(o));var i=t.headers["content-type"];i&&0<=i.indexOf("text/")?0<=i.indexOf("ascii")?a.setEncoding("ascii"):a.setEncoding("utf8"):a.setEncoding("binary"),a.on("data",function(e){r.push(e)}),a.on("end",function(){var e=r.join("");t.responseText=t.responseText||e,l(null,t,e)})});return o.on("error",function(e){var t=r.protocol+"//"+r.hostname+(r.port?":"+r.port:""),n=t+r.path,o=r.method.toUpperCase()+" "+n;e.desc=o,e.url=n,e.opts=r,e.data=a,e.origin=t,e.toString=function(){return e.message+"\n"+JSON.stringify(r,null,2).split(",")},e.message=e.toString(),l(e)}),v.debug&&(console.log("dasu typeof dataString: "+i(a)),a&&0<=a.length&&console.log("dasu sending length: "+a.length)),o.write(a),o.end(),{abort:function(){o.abort()}}}function r(l,s){var u;if(m="browser"===v.mode||"node"!==v.mode&&"undefined"!=typeof window&&void 0!==window.XMLHttpRequest?(u="browser",a):(u="node",g),"string"==typeof l){var e="undefined"!=typeof URL?new URL(l):f("url").parse(l);if("object"!==i(e))throw new Error("failed to parse params shorthand: "+l);(l={method:"GET"}).protocol=e.protocol,l.host=e.host,l.hostname=e.hostname,l.port=e.port,l.path=e.path||e.pathname}var t="",n=l.data||l.json||"",c="";switch(i(n)){case"object":t=n.toString==={}.toString?(c=JSON.stringify(n),"application/json"):(v.debug&&console.log("dasu: complex object data"),c=n,"application/octet-stream");break;case"string":if(1<n.length&&("{"===n[0]||"["===n[0]))try{JSON.parse(n),console&&console.warn?console.warn("[WARNING] dasu: Sending data that may be JSON as text/plain"):console.log("[WARNING] dasu: Sending data that may be JSON as text/plain")}catch(e){}c=n,t="text/plain";break;default:c=""+n,t="text/plain"}delete(l=Object.assign({},l)).data,t&&(l.headers=Object.assign({},{"content-type":t},l.headers||{}),"application/octet-stream"===t&&c&&c.length&&(l.headers=Object.assign({},{"content-length":c.length},l.headers||{}))),l.method=l.method||"GET",l.path=l.path||"/","/"!==l.path[0]&&(l.path="/"+l.path);var o,r="http";l.port&&(o=Number(l.port),String(o)===l.port&&(l.port=o),443===l.port&&(r="https")),l.protocol||(l.protocol=r);var d={protocol:l.protocol,host:l.host,hostname:l.hostname,port:l.port,path:l.path,method:l.method,headers:l.headers},p=0,h=3;return v.log="",m(d,c,function e(t,n,o){if(t||void 0===n)s(t);else{if(!n.getResponseHeader&&n.headers&&(n.getResponseHeader=function(e){return n.headers[e]}),n.getAllResponseHeaders&&!n.headers&&(n.headers=n.getAllResponseHeaders()),!n.getAllResponseHeaders&&n.headers&&(n.getAllResponseHeaders=function(){return n.headers}),void 0===n.status?n.status=n.statusCode:n.statusCode=n.status,v.debug&&(v.log+="\n-------------\n",v.log+=new Date,v.log+="headers:\n"+JSON.stringify(n.headers,null,2)+"\n\n",v.log+="body:\n"+o+"\n"),v.follow&&300<=n.status&&n.status<400&&n.headers.location&&p<h){p++;var r,a=n.headers.location;if("//"===a.slice(0,2)&&(a=l.protocol+":"+a),"/"===a[0])return d.path=a,m(d,c,e);if("undefined"!=typeof URL?r=new URL(a):"node"===u&&(r=f("url").parse(a)),v.debug)if("node"===u)try{var i=f("fs");i.writeFileSync("debug.dasu-response.log",v.log,"utf8")}catch(t){}else console.log(v.log);if(r)return d.protocol=r.protocol&&r.protocol,d.host=r.host&&r.host,d.hostname=r.hostname&&r.hostname,d.port=r.port&&r.port,d.path=r.path&&r.pathname,m(d,c,e)}s(void 0,n,o)}})}v.xhr=function(e,o){r(e,function(e,t,n){o(e,n)})},v.req=r,t.exports=v},{}],2:[function(u,e,t){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ee=u("cheerio"),c=u("./dasu");c.follow=!1,c.debug=!1;var n=u("./util.js"),g=n._getScripts,y=n._findLine,x=n._between,te=u("jsonpath"),d="Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html) (yt-search; https://www.npmjs.com/package/yt-search)",p=u("url"),o={};Object.keys(process.env).forEach(function(e){var t=process.env[e];if("0"==t||"false"==t||!t)return o[e]=!1;o[e]=t});var h=o.debug;function ne(){h&&console.log.apply(this,arguments)}var r,b=u("querystring"),w=u("human-time"),oe={YT:"https://youtube.com",SEARCH_MOBILE:"https://m.youtube.com/results",SEARCH_DESKTOP:"https://www.youtube.com/results"};function i(e,t){if(!t)return new Promise(function(n,o){i(e,function(e,t){return e?o(e):void n(t)})});var n="string"==typeof e?{query:e}:e;if(n.userAgent&&(d=n.userAgent),n.search=n.query||n.search,n.original_search=n.search,n.videoId)return function(e,r){var t;ne("fn: getVideoMetaData"),"string"==typeof e&&(t=e);"object"===a(e)&&(t=e.videoId);var n="https://www.youtube.com/watch?hl=en&gl=US&v="+t,o=p.parse(n);o.headers={"user-agent":d,accept:"text/html","accept-encoding":"gzip","accept-language":"en-US"},o.headers["user-agent"]="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13_6) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.1.1 Safari/605.1.15",c.req(o,function(e,t,n){if(e)r(e);else{if(200!==t.status)return r("http status: "+t.status);var o;h&&(o=u("fs"),u("path"),o.writeFileSync("dasu.response",t.responseText,"utf8"));try{!function(e,t){ne("_parseVideoInitialData"),e=g(e);var n=x(y(/ytInitialData.*=\s*{/,e),"{","}");if(!n)return t("could not find inital data in the html document");var o=x(y(/ytInitialPlayerResponse.*=\s*{/,e),"{","}");if(!o)return t("could not find inital player data in the html document");var r=JSON.parse(n),a=JSON.parse(o),i=te.value(r,"$..currentVideoEndpoint..videoId");if(!i)return t("video unavailable");if("ERROR"===te.value(a,"$..status")||"Video unavailable"===te.value(a,"$..reason"))return t("video unavailable");var l=te.value(r,"$..videoPrimaryInfoRenderer..title..text")||te.value(r,"$..videoPrimaryInfoRenderer..title..simpleText")||te.value(r,"$..videoPrimaryRenderer..title..text")||te.value(r,"$..videoPrimaryRenderer..title..simpleText")||te.value(r,"$..title..text")||te.value(r,"$..title..simpleText"),s=te.query(r,"$..description..text").join("")||te.query(a,"$..description..simpleText").join("")||te.query(a,"$..microformat..description..simpleText").join("")||te.query(a,"$..videoDetails..shortDescription").join(""),u=te.value(r,"$..owner..title..text")||te.value(r,"$..owner..title..simpleText"),c=te.value(r,"$..owner..navigationEndpoint..url")||te.value(r,"$..owner..title..url"),d="https://i.ytimg.com/vi/"+i+"/hqdefault.jpg",p=ae(function(e){var t="",n=Math.floor(e/36e5),o=Math.floor(e/6e4)%60,r=Math.floor(e/1e3)%60;n&&(t+=n+":");o&&(t+=o+":");String(r).length<2&&(t+="0");return t+=r}(1e3*Number(te.value(a,"$..videoDetails..lengthSeconds")))),h=te.value(r,"$..sentimentBar..tooltip").split(/[,.]/).join("").split(/\D+/),v=(Number(h[0]),Number(h[1]),te.value(r,"$..uploadDate")||te.value(r,"$..dateText..simpleText")),f=v&&w(new Date(v))||"",m={title:l,description:s,url:oe.YT+"/watch?v="+i,videoId:i,seconds:Number(p.seconds),timestamp:p.timestamp,duration:p,views:Number(te.value(a,"$..videoDetails..viewCount")),genre:(te.value(a,"$..category")||"").toLowerCase(),uploadDate:re(v),ago:f,image:d,thumbnail:d,author:{name:u,url:oe.YT+c}};t(null,m)}(n,r)}catch(e){r(e)}}})}(n.videoId,t);if(n.listId)return function(e,r){var t;ne("fn: getPlaylistMetaData"),"string"==typeof e&&(t=e);"object"===a(e)&&(t=e.listId||e.playlistId);var n="https://www.youtube.com/playlist?hl=en&gl=US&list="+t,o=p.parse(n);o.headers={"user-agent":d,accept:"text/html","accept-encoding":"gzip","accept-language":"en-US"},c.req(o,function(e,t,n){if(e)r(e);else{if(200!==t.status)return r("http status: "+t.status);var o;h&&(o=u("fs"),u("path"),o.writeFileSync("dasu.response",t.responseText,"utf8"));try{!function(e,t){ne("fn: parsePlaylistBody");var n=(e=g(e)).match(/ytInitialData.*=\s*({.*});/)[1];if(!n)throw new Error("failed to parse ytInitialData json data");var o=JSON.parse(n),r=te.value(o,"$..microformat..urlCanonical").split("=")[1],a=te.value(o,"$..sidebar.playlistSidebarRenderer.items[0]..stats[1].simpleText").match(/\d+/),i=te.query(o,"$..playlistVideoListRenderer..contents")[0],l=[];i.forEach(function(e){var t=e,n=ae(te.value(t,"$..lengthText..simpleText")||te.value(t,"$..thumbnailOverlayTimeStatusRenderer..simpleText")||te.query(t,"$..lengthText..text").join("")||te.query(t,"$..thumbnailOverlayTimeStatusRenderer..text").join("")),o={title:te.value(t,"$..title..simpleText")||te.value(t,"$..title..text")||te.query(t,"$..title..text").join(""),videoId:te.value(t,"$..videoId"),listId:r,thumbnail:te.value(t,"$..thumbnail..thumbnails[0]..url").split("?")[0],duration:n,author:{name:te.value(t,"$..shortBylineText..runs[0]..text"),url:"https://youtube.com"+te.value(t,"$..shortBylineText..runs[0]..url")}};l.push(o)});var s={title:te.value(o,"$..microformat..title"),listId:r,url:"https://youtube.com/playlist?list="+r,views:Number(a),date:function(e){ne("fn: _parsePlaylistLastUpdateTime");for(var t=e.trim().split(/[\s.-]+/),n=0;n<t.length;n++){var o=t.slice(n),r=o.join(" "),a=o.reverse().join(" "),i=new Date(r),l=new Date(a);if("Invalid Date"!==i.toString())return re(i);if("Invalid Date"!==l.toString())return re(l)}return""}(te.value(o,"$..sidebar.playlistSidebarRenderer.items[0]..stats[2]..simpleText")||te.query(o,"$..sidebar.playlistSidebarRenderer.items[0]..stats[2]..text").join("")||""),image:l[0].thumbnail,thumbnail:l[0].thumbnail,videos:l,author:{name:te.value(o,"$..videoOwner..title..runs[0]..text"),url:"https://youtube.com"+te.value(o,"$..videoOwner..navigationEndpoint..url")}};t&&t(null,s)}(n,r)}catch(e){r(e)}}})}(n.listId,t);if(!n.search)return t(Error("yt-search: no query given"));!function v(f,m){var e=b.escape(f.search).split(/\s+/);var t=f.hl||"en";var n=f.gl||"US";var o=f.category||"";var r=Number(f.pageStart)||1;var a=Number(f.pageEnd)||Number(f.pages)||1;r<=0&&(r=1)<=a&&(a+=1);Number.isNaN(a)&&m("error: pageEnd must be a number");f.pageStart=r;f.pageEnd=a;f.currentPage=f.currentPage||r;var i="?";i+="search_query="+e.join("+");-1===i.indexOf("&hl=")&&(i+="&hl="+t);-1===i.indexOf("&gl=")&&(i+="&gl="+n);o&&(i+="&category="+o);f.sp&&(i+="&sp="+f.sp);var l=oe.SEARCH_DESKTOP+i;var s=p.parse(l);s.headers={"user-agent":d,accept:"text/html","accept-encoding":"gzip","accept-language":"en-US"};ne(s);ne("getting results: "+f.currentPage);c.req(s,function(e,t,n){if(e)m(e);else{if(200!==t.status)return m("http status: "+t.status);var o;h&&(o=u("fs"),u("path"),o.writeFileSync("dasu.response",t.responseText,"utf8"));try{O(n,function(e,t){if(e)return m(e);var n=t,o=n.filter($),r=n.filter(T),a=n.filter(S),i=n.filter(j),l=n.filter(I);f._data=f._data||{},f._data.videos=f._data.videos||[],f._data.playlists=f._data.playlists||[],f._data.channels=f._data.channels||[],f._data.live=f._data.live||[],f._data.all=f._data.all||[],o.forEach(function(e){f._data.videos.push(e)}),r.forEach(function(e){f._data.playlists.push(e)}),a.forEach(function(e){f._data.channels.push(e)}),i.forEach(function(e){f._data.live.push(e)}),l.forEach(function(e){f._data.all.push(e)}),f.currentPage++;var s,u,c,d,p,h=f.currentPage<=f.pageEnd;h&&t._sp?(f.sp=t._sp,setTimeout(function(){v(f,m)},2500)):(s=f._data.videos.filter($),u=f._data.playlists.filter(T),c=f._data.channels.filter(S),d=f._data.live.filter(j),p=f._data.all.slice(I),m(null,{all:p,videos:s,live:d,playlists:u,lists:u,accounts:c,channels:c}))})}catch(e){m(e)}}})}(n,t)}function $(e,t,n){if("video"!==e.type)return!1;var o=e.videoId;return n.findIndex(function(e){return o===e.videoId})===t}function T(e,t,n){if("list"!==e.type)return!1;var o=e.listId;return n.findIndex(function(e){return o===e.listId})===t}function S(e,t,n){if("channel"!==e.type)return!1;var o=e.url;return n.findIndex(function(e){return o===e.url})===t}function j(e,t,n){if("live"!==e.type)return!1;var o=e.videoId;return n.findIndex(function(e){return o===e.videoId})===t}function I(e,t,n){switch(e.type){case"video":case"list":case"channel":case"live":break;default:return!1}var o=e.url;return n.findIndex(function(e){return o===e.url})===t}function O(e,t){var o=/{.*}/,n=ee.load(e),r=n("div#initial-data").html()||"";if(!(r=o.exec(r)||""))for(var a=n("script"),i=0;i<a.length;i++){n(a[i]).html().split("\n").forEach(function(e){for(var t;0<=(t=e.indexOf("ytInitialData"));){e=e.slice(t+"ytInitialData".length);var n=o.exec(e);n&&n.length>r.length&&(r=n)}})}if(!r)return t("could not find inital data in the html document");var l=[],s=[],u=JSON.parse(r[0]),c=te.query(u,"$..itemSectionRenderer..contents.*");ne("items.length: "+c.length);for(var d=0;d<c.length;d++){var p=c[d],h=void 0,v="unknown",f=p.compactPlaylistRenderer||p.playlistRenderer,m=p.compactChannelRenderer||p.channelRenderer,g=p.compactVideoRenderer||p.videoRenderer,y=f&&te.value(p,"$..playlistId"),x=m&&te.value(p,"$..channelId"),b=g&&te.value(p,"$..videoId"),w=te.query(p,"$..viewCountText..text").join(""),$="UPCOMING"===te.query(p,"$..thumbnailOverlayTimeStatusRenderer..style").join("").trim();b&&(v="video"),x&&(v="channel"),y&&(v="list"),(0<=w.indexOf("watching")||"LIVE"===te.query(p,"$..thumbnailOverlayTimeStatusRenderer..text").join("").trim()||$)&&(v="live");try{switch(v){case"video":var T=ie(te.value(p,"$..thumbnail..url"))||ie(te.value(p,"$..thumbnails..url"))||ie(te.value(p,"$..thumbnails")),S=te.value(p,"$..title..text")||te.value(p,"$..title..simpleText"),j=te.value(p,"$..shortBylineText..text")||te.value(p,"$..longBylineText..text"),I=te.value(p,"$..shortBylineText..url")||te.value(p,"$..longBylineText..url"),O=te.value(p,"$..publishedTimeText..text")||te.value(p,"$..publishedTimeText..simpleText"),_=te.value(p,"$..viewCountText..text")||te.value(p,"$..viewCountText..simpleText")||"0",N=Number(_.split(/\s+/)[0].split(/[,.]/).join("").trim()),E=ae(te.value(p,"$..lengthText..text")||te.value(p,"$..lengthText..simpleText")||"0:00"),q=te.query(p,"$..description..text").join("")||te.query(p,"$..descriptionSnippet..text").join(""),h={type:"video",videoId:b,url:oe.YT+"/watch?v="+b,title:S.trim(),description:q,image:T,thumbnail:T,seconds:Number(E.seconds),timestamp:E.timestamp,duration:E,ago:O,views:Number(N),author:{name:j,url:oe.YT+I}};break;case"list":var R=ie(te.value(p,"$..thumbnail..url"))||ie(te.value(p,"$..thumbnails..url"))||ie(te.value(p,"$..thumbnails")),D=te.value(p,"$..title..text")||te.value(p,"$..title..simpleText"),C=te.value(p,"$..shortBylineText..text")||te.value(p,"$..longBylineText..text")||te.value(p,"$..shortBylineText..simpleText")||te.value(p,"$..longBylineText..simpleTextn")||"YouTube",B=te.value(p,"$..shortBylineText..url")||te.value(p,"$..longBylineText..url")||"",L=te.value(p,"$..videoCountShortText..text")||te.value(p,"$..videoCountText..text")||te.value(p,"$..videoCountShortText..simpleText")||te.value(p,"$..videoCountText..simpleText")||te.value(p,"$..thumbnailText..text")||te.value(p,"$..thumbnailText..simpleText");h={type:"list",listId:y,url:oe.YT+"/playlist?list="+y,title:D.trim(),image:R,thumbnail:R,videoCount:L,author:{name:C,url:oe.YT+B}};break;case"channel":var M=ie(te.value(p,"$..thumbnail..url"))||ie(te.value(p,"$..thumbnails..url"))||ie(te.value(p,"$..thumbnails")),P=te.value(p,"$..title..text")||te.value(p,"$..title..simpleText")||te.value(p,"$..displayName..text"),U=te.value(p,"$..shortBylineText..text")||te.value(p,"$..longBylineText..text")||te.value(p,"$..displayName..text")||te.value(p,"$..displayName..simpleText"),k=te.value(p,"$..videoCountText..text")||te.value(p,"$..videoCountText..simpleText")||"0",H=te.value(p,"$..subscriberCountText..text")||te.value(p,"$..subscriberCountText..simpleText");"string"==typeof H&&(H=H.split(/\s+/).filter(function(e){return e.match(/\d/)})[0]);var A=te.value(p,"$..navigationEndpoint..url")||"/user/"+P;h={type:"channel",name:U,url:oe.YT+A,title:P.trim(),image:M,thumbnail:M,videoCount:Number(k.replace(/\D+/g,"")),videoCountLabel:k,subCount:function(e){if(!e)return;var t=e.split(/\s+/).filter(function(e){return e.match(/\d/)})[0].toLowerCase(),n=t.match(/\d+(\.\d+)?/);if(!n||!n[0])return;var o=Number(n[0]);return 0<=t.indexOf("m")?1e6*o:0<=t.indexOf("k")?1e3*o:o}(H),subCountLabel:H};break;case"live":var J=ie(te.value(p,"$..thumbnail..url"))||ie(te.value(p,"$..thumbnails..url"))||ie(te.value(p,"$..thumbnails")),Y=te.value(p,"$..title..text")||te.value(p,"$..title..simpleText"),G=te.value(p,"$..shortBylineText..text")||te.value(p,"$..longBylineText..text"),z=te.value(p,"$..shortBylineText..url")||te.value(p,"$..longBylineText..url"),V=te.query(p,"$..viewCountText..text").join("")||te.query(p,"$..viewCountText..simpleText").join("")||"0",F=Number(V.split(/\s+/)[0].split(/[,.]/).join("").trim()),K=te.query(p,"$..description..text").join("")||te.query(p,"$..descriptionSnippet..text").join(""),X=te.value(p,"$..upcomingEventData..startTime"),W=Date.now()>X?1e3*X:X,Q=re(W);h={type:"live",videoId:b,url:oe.YT+"/watch?v="+b,title:Y.trim(),description:K,image:J,thumbnail:J,watching:Number(F),author:{name:G,url:oe.YT+z}},W?(h.startTime=W,h.startDate=Q,h.status="UPCOMING"):h.status="LIVE"}h&&s.push(h)}catch(e){ne(e),l.push(e)}}var Z=te.value(u,"$..continuation");return s._ctoken=Z,l.length?t(l.pop(),s):t(null,s)}function re(e){return e=new Date(e),ne("fn: _toInternalDateString"),e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()}function ae(e){var t=e.split(/\s+/),n=t[t.length-1].replace(/[^:.\d]/g,"");if(!n)return{toString:function(){return t[0]},seconds:0,timestamp:0};for(;n[n.length-1].match(/\D/);)n=n.slice(0,-1);for(var o=(n=n.replace(/\./g,":")).split(/[:.]/),r=0,a=0,i=o.length-1;0<=i;i--)if(!(o[i].length<=0)){var l=o[i].replace(/\D/g,"");if(r+=parseInt(l)*(0<a?Math.pow(60,a):1),2<++a)break}return{toString:function(){return r+" seconds ("+n+")"},seconds:r,timestamp:n}}function ie(e){var t;return"string"!=typeof e?e.length?ie(t=e[0]):void 0:0===(t=(t=(t=(t=e).split("?")[0]).split("/default.jpg").join("/hqdefault.jpg")).split("/default.jpeg").join("/hqdefault.jpeg")).indexOf("//")?"https://"+t.slice(2):t.split("http://").join("https://")}e.exports=i,e.exports.search=i,u.main===e&&(r="superman theme list pewdiepie channel",console.log("test: doing list search"),i({query:r,pageEnd:1},function(e,t){if(e)throw e;var n=t.videos,o=t.playlists,r=t.channels;console.log("videos: "+n.length),console.log("playlists: "+o.length),console.log("channels: "+r.length);for(var a=0;a<n.length;a++){var i=n[a],l=" (".concat(i.timestamp,")");console.log(i.title+l)}o.forEach(function(e){console.log("playlist: ".concat(e.title," | ").concat(e.listId))}),r.forEach(function(e){console.log("channel: ".concat(e.title," | ").concat(e.description))})}))},{"./dasu":1,"./util.js":3,cheerio:void 0,fs:void 0,"human-time":void 0,jsonpath:void 0,path:void 0,querystring:void 0,url:void 0}],3:[function(e,t,n){"use strict";var l=e("cheerio"),o={};function i(e,t){var n=i.cache||{};(i.cache=n)[t]=n[t]||{};var o=n[t].lines||t.split("\n");n[t].lines=o,clearTimeout(n[t].timeout),n[t].timeout=setTimeout(function(){delete n[t]},100);for(var r=0;r<o.length;r++){var a=o[r];if(e.test(a))return a}return""}(t.exports=o)._getScripts=function(e){for(var t=l.load(e)("script"),n="",o=0;o<t.length;o++){var r=t[o],a=r&&r.children[0],i=a&&a.data;i&&(n+=i+"\n")}return n},o._findLine=i,o._between=function(e,t,n){var o=e.indexOf(t),r=e.lastIndexOf(n);return o<0||r<0?"":e.slice(o,r+1)}},{cheerio:void 0}]},{},[2])(2)});
//# sourceMappingURL=yt-search.min.js.map